# HU-016: Monitorear KPIs de Inventario

---

## Metadata

| Campo | Valor |
|-------|-------|
| **ID** | HU-016 |
| **Prioridad** | Must |
| **RF Relacionados** | RF-079, RF-080, RF-081, RF-082, RF-083, RF-084, RF-085 |
| **Módulo/Componente** | KPIs - Indicadores de Gestión |
| **Estado** | Draft |

---

## Historia de Usuario

**Como** Usuario del sistema,  
**Quiero** visualizar indicadores clave de rendimiento (KPIs) de mi gestión de inventario,  
**Para** medir el impacto de mis decisiones y demostrar mejoras a lo largo del tiempo.

---

## Criterios de Aceptación

### CA-001: KPI Costo Total de Inventario

- **Dado** que existen productos en inventario
- **Cuando** veo el KPI de Costo Total
- **Entonces** muestra la suma de (inventario físico × costo unitario) de todos los productos activos

### CA-002: KPI Días en Inventario Valorizado

- **Dado** que existen transacciones de inventario
- **Cuando** veo el KPI de Días en Inventario
- **Entonces** muestra el promedio de días que los productos permanecen en stock antes de venderse

### CA-003: KPI Inventario Inmovilizado

- **Dado** que el criterio de inmovilizado es "productos que ingresaron antes de las últimas 2 OC"
- **Cuando** veo el KPI de Inventario Inmovilizado
- **Entonces** muestra el valor total y % del inventario que cumple ese criterio

### CA-004: Configurar criterio de inmovilizado

- **Dado** que accedo a configuración de KPIs
- **Cuando** modifico el criterio a "productos sin movimiento en 60 días"
- **Entonces** el KPI se recalcula con el nuevo criterio

### CA-005: KPI Rotación de Inventario

- **Dado** que existen ventas y stock
- **Cuando** veo el KPI de Rotación
- **Entonces** muestra Ventas del período / Inventario promedio del período

### CA-006: KPIs en dashboard

- **Dado** que accedo al dashboard principal
- **Cuando** veo la sección de KPIs
- **Entonces** veo los 4 indicadores con valor actual y comparativa vs. período anterior (↑↓)

### CA-007: Exportar KPIs (Should)

- **Dado** que veo los KPIs en pantalla
- **Cuando** ejecuto "Exportar"
- **Entonces** el sistema genera archivo CSV o PDF con los valores actuales y serie histórica

---

## Escenarios Alternativos

### Escenario: Sin datos suficientes para KPI

- **Dado** que no hay transacciones históricas suficientes
- **Cuando** el sistema calcula los KPIs
- **Entonces** muestra "Datos insuficientes" en lugar de un valor engañoso

### Escenario: Múltiples monedas

- **Dado** que existen productos con costos en USD y Pesos
- **Cuando** veo los KPIs de costo
- **Entonces** el sistema consolida en la moneda base configurada usando el tipo de cambio actual

---

## Notas y Aclaraciones

- Los KPIs se actualizan en tiempo real cuando cambian datos relevantes
- La comparativa vs. período anterior usa el mismo lapso (ej: semana actual vs. semana anterior)
- El criterio de inmovilizado por defecto es: productos que ingresaron antes de las últimas 2 OC
- Estos 4 KPIs están alineados con los objetivos OBJ-002 y OBJ-003

---

## Checklist de Validación

- [x] La historia sigue el formato "Como... Quiero... Para..."
- [x] El valor/beneficio está claramente expresado
- [x] Hay al menos 1 criterio de aceptación
- [x] Los criterios siguen el formato Given/When/Then
- [x] Los RF relacionados están correctamente referenciados
- [x] La prioridad MoSCoW está asignada

---

## Señal de Completación

> Historia de usuario HU-016 completada.
