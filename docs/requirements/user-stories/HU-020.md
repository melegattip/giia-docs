# HU-020: Configurar Múltiples Monedas

---

## Metadata

| Campo | Valor |
|-------|-------|
| **ID** | HU-020 |
| **Prioridad** | Must |
| **RF Relacionados** | RF-102, RF-103, RF-104, RF-105 |
| **Módulo/Componente** | Configuración Multi-moneda |
| **Estado** | Reviewed |

---

## Historia de Usuario

**Como** Administrador del sistema,  
**Quiero** configurar múltiples monedas (USD y Peso local) y registrar transacciones en cualquiera de ellas,  
**Para** reflejar correctamente mis operaciones con proveedores que trabajan en diferentes divisas.

---

## Criterios de Aceptación

### CA-001: Configurar monedas disponibles

- **Dado** que accedo a configuración del sistema
- **Cuando** configuro las monedas
- **Entonces** puedo activar/desactivar USD y Peso local como monedas disponibles

### CA-002: Moneda base del sistema

- **Dado** que configuro monedas
- **Cuando** selecciono la moneda base
- **Entonces** los reportes y KPIs se consolidan en esta moneda

### CA-003: Registrar OC en USD

- **Dado** que creo una orden de compra
- **Cuando** selecciono USD como moneda
- **Entonces** los costos se registran en USD y el sistema los convierte a moneda base para KPIs

### CA-004: Configurar tipo de cambio

- **Dado** que accedo a configuración de monedas
- **Cuando** actualizo el tipo de cambio USD/Peso
- **Entonces** el sistema usa este valor para todas las conversiones. TODO: esto hay que ver si lo hacemos de forma dinamica.

### CA-005: Consolidar KPIs en moneda base

- **Dado** que tengo productos con costos en USD y en Pesos
- **Cuando** veo el KPI "Costo Total de Inventario"
- **Entonces** el sistema consolida todo en la moneda base usando el tipo de cambio actual, mostrando secundariamente el valor en la otra moneda.

### CA-006: Mostrar moneda en transacciones

- **Dado** que una OC fue registrada en USD
- **Cuando** veo el detalle de la OC
- **Entonces** los valores muestran claramente "USD" como moneda

---

## Escenarios Alternativos

### Escenario: Producto con múltiples proveedores en diferentes monedas

- **Dado** que un producto tiene proveedor A (USD) y proveedor B (Pesos)
- **Cuando** creo OC para cada proveedor
- **Entonces** cada OC usa la moneda correspondiente a su proveedor

---

## Notas y Aclaraciones

- El MVP soporta 2 monedas: USD y Peso local (definido en configuración)
- El tipo de cambio se actualiza manualmente (integración automática fuera del MVP)
- El costo unitario del producto puede estar en cualquier moneda
- Las conversiones siempre usan el tipo de cambio vigente al momento de la consulta

---
