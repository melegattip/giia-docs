# HU-015: Recibir Alertas de Inventario

---

## Metadata

| Campo | Valor |
|-------|-------|
| **ID** | HU-015 |
| **Prioridad** | Must |
| **RF Relacionados** | RF-073, RF-074, RF-075, RF-076, RF-077, RF-078 |
| **Módulo/Componente** | Alertas |
| **Estado** | Draft |

---

## Historia de Usuario

**Como** Usuario del sistema,  
**Quiero** recibir alertas automáticas sobre situaciones críticas de inventario y desvíos en llegadas,  
**Para** tomar acción oportuna sin tener que revisar manualmente cada producto.

---

## Criterios de Aceptación

### CA-001: Alerta de producto en zona roja

- **Dado** que un producto pasa de zona amarilla a zona roja
- **Cuando** el sistema detecta el cambio
- **Entonces** genera una alerta visible en el centro de notificaciones con prioridad alta

### CA-002: Alerta de llegada próxima

- **Dado** que configuré alertas 3 días antes de la llegada estimada
- **Cuando** una OC está a 3 días de su fecha estimada
- **Entonces** el sistema genera alerta "OC #123 de Proveedor ABC llega en 3 días"

### CA-003: Alerta de llegada vencida

- **Dado** que una OC tiene fecha estimada 01/01/2026
- **Cuando** llega el 02/01/2026 sin registrar recepción
- **Entonces** el sistema genera alerta de prioridad máxima "OC #123 VENCIDA - Sin recepción"

### CA-004: Configurar días de anticipación

- **Dado** que accedo a configuración de alertas
- **Cuando** configuro "Alertar X días antes de llegada" = 5
- **Entonces** las alertas de llegada próxima se generan 5 días antes

### CA-005: Configurar porcentaje de desvío

- **Dado** que accedo a configuración de alertas
- **Cuando** configuro "Alertar si desvío > 10% del Lead Time"
- **Entonces** el sistema calcula el umbral según el LT de cada proveedor

### CA-006: Centro de notificaciones

- **Dado** que existen alertas generadas
- **Cuando** accedo al centro de notificaciones
- **Entonces** veo todas las alertas ordenadas por prioridad y fecha, con contador de no leídas

### CA-007: Marcar alerta como leída

- **Dado** que tengo una alerta no leída
- **Cuando** la marco como leída
- **Entonces** desaparece del contador pero permanece en el historial

---

## Escenarios Alternativos

### Escenario: Múltiples alertas del mismo producto

- **Dado** que un producto tiene alerta de zona roja y de OC vencida
- **Cuando** veo las alertas
- **Entonces** ambas aparecen como alertas separadas con sus propios detalles

### Escenario: Alerta resuelta automáticamente

- **Dado** que existe alerta de producto en zona roja
- **Cuando** el flujo neto sube a zona verde
- **Entonces** la alerta se marca como "Resuelta" automáticamente

---

## Notas y Aclaraciones

- Las alertas son críticas para la gestión proactiva de inventario
- El día de llegada estimada siempre genera alerta (aunque esté dentro del umbral)
- Las alertas de OC vencida se mantienen hasta que se registre la recepción
- El usuario puede desactivar tipos específicos de alertas si lo desea

---

## Checklist de Validación

- [x] La historia sigue el formato "Como... Quiero... Para..."
- [x] El valor/beneficio está claramente expresado
- [x] Hay al menos 1 criterio de aceptación
- [x] Los criterios siguen el formato Given/When/Then
- [x] Los RF relacionados están correctamente referenciados
- [x] La prioridad MoSCoW está asignada

---

## Señal de Completación

> Historia de usuario HU-015 completada.
