# HU-009: Visualizar Zonas de Buffer

---

## Metadata

| Campo | Valor |
|-------|-------|
| **ID** | HU-009 |
| **Prioridad** | Must |
| **RF Relacionados** | RF-040, RF-041, RF-042, RF-043, RF-044, RF-045 |
| **Módulo/Componente** | Motor DDMRP - Cálculo de Zonas |
| **Estado** | Draft |

---

## Historia de Usuario

**Como** Usuario del sistema,  
**Quiero** ver las zonas de buffer (Rojo, Amarillo, Verde) calculadas para cada producto,  
**Para** entender el estado de mi inventario de forma visual e intuitiva.

---

## Criterios de Aceptación

### CA-001: Cálculo de zona roja

- **Dado** que un producto tiene CPD=10, LT=5, Factor LT=0.3, y Factor Variabilidad=0.2
- **Cuando** el sistema calcula la zona roja
- **Entonces** Zona Roja = Base (10×5×0.3=15) + Plus (10×5×0.2=10) = 25 unidades

### CA-002: Cálculo de zona amarilla

- **Dado** que un producto tiene CPD=10 y LT=5
- **Cuando** el sistema calcula la zona amarilla
- **Entonces** Zona Amarilla = CPD × LT = 50 unidades

### CA-003: Cálculo de zona verde

- **Dado** que un producto tiene CPD=10, LT=5, Factor LT=0.3, MOQ=30, Ciclo de pedido=7 días
- **Cuando** el sistema calcula la zona verde
- **Entonces** Zona Verde = máximo entre (CPD×LT×Factor LT=15, MOQ=30, Ciclo×CPD=70) = 70 unidades

### CA-004: Cálculo de TOG

- **Dado** que las zonas son Roja=25, Amarilla=50, Verde=70
- **Cuando** el sistema calcula el TOG
- **Entonces** TOG = 25 + 50 + 70 = 145 unidades

### CA-005: Visualización gráfica del buffer

- **Dado** que un producto tiene zonas calculadas y flujo neto de 80 unidades
- **Cuando** veo el producto en el dashboard o detalle
- **Entonces** veo una barra horizontal dividida en franjas Roja/Amarilla/Verde con una línea indicando la posición del flujo neto

### CA-006: Recálculo automático

- **Dado** que cambio el perfil de buffer de un producto
- **Cuando** guardo el cambio
- **Entonces** el sistema recalcula las zonas inmediatamente y actualiza la visualización

---

## Escenarios Alternativos

### Escenario: Producto sin perfil de buffer

- **Dado** que un producto no tiene perfil de buffer asignado
- **Cuando** accedo a su vista
- **Entonces** no se muestran zonas y aparece advertencia "Requiere configurar perfil de buffer"

### Escenario: Cambio de CPD afecta zonas

- **Dado** que un producto tiene zonas calculadas
- **Cuando** se registran nuevas ventas que cambian el CPD
- **Entonces** las zonas se recalculan automáticamente reflejando el nuevo CPD

---

## Notas y Aclaraciones

- Las fórmulas siguen la metodología DDMRP estándar del Demand Driven Institute
- El Factor de Lead Time determina qué porción del consumo durante el LT es "seguridad"
- El Factor de Variabilidad añade protección adicional por inconsistencias en demanda/suministro
- El MOQ y Ciclo de pedido pueden dominar el cálculo de zona verde si son significativos

---

## Checklist de Validación

- [x] La historia sigue el formato "Como... Quiero... Para..."
- [x] El valor/beneficio está claramente expresado
- [x] Hay al menos 1 criterio de aceptación
- [x] Los criterios siguen el formato Given/When/Then
- [x] Los RF relacionados están correctamente referenciados
- [x] La prioridad MoSCoW está asignada

---

## Señal de Completación

> Historia de usuario HU-009 completada.
