# HU-011: Obtener Sugerencias de Reposición

---

## Metadata

| Campo | Valor |
|-------|-------|
| **ID** | HU-011 |
| **Prioridad** | Must |
| **RF Relacionados** | RF-053, RF-054, RF-055, RF-056, RF-057 |
| **Módulo/Componente** | Motor DDMRP - Sugerencias de Reposición |
| **Estado** | Draft |

---

## Historia de Usuario

**Como** Usuario del sistema,  
**Quiero** recibir sugerencias automáticas de qué productos reponer y en qué cantidad,  
**Para** tomar decisiones de compra rápidas y precisas sin cálculos manuales.

---

## Criterios de Aceptación

### CA-001: Generar sugerencia de reposición

- **Dado** que un producto tiene flujo neto en zona roja (flujo=40, TOG=150)
- **Cuando** el sistema genera sugerencias
- **Entonces** sugiere reponer TOG - Flujo Neto = 150 - 40 = 110 unidades

### CA-002: Sugerencia solo para productos en rojo/amarillo

- **Dado** que un producto tiene flujo neto en zona verde
- **Cuando** el sistema genera sugerencias
- **Entonces** no genera sugerencia de reposición para ese producto

### CA-003: Priorización por criticidad

- **Dado** que existen múltiples productos en zona roja con diferentes profundidades
- **Cuando** veo la lista de sugerencias
- **Entonces** están ordenadas por profundidad en zona roja (mayor penetración = mayor prioridad)

### CA-004: Agrupar por proveedor

- **Dado** que existen sugerencias para productos de diferentes proveedores
- **Cuando** selecciono "Agrupar por proveedor"
- **Entonces** las sugerencias se organizan por proveedor preferido de cada producto

### CA-005: Convertir sugerencias en OC

- **Dado** que tengo 3 sugerencias de reposición del mismo proveedor
- **Cuando** selecciono las 3 y ejecuto "Crear OC"
- **Entonces** el sistema crea una OC con las 3 líneas de productos y cantidades sugeridas

### CA-006: Ajustar cantidad sugerida

- **Dado** que el sistema sugiere reponer 110 unidades de un producto con MOQ=50
- **Cuando** modifico la cantidad a 100 unidades
- **Entonces** el sistema muestra advertencia de MOQ pero permite el ajuste

### CA-007: Respetar MOQ mínimo

- **Dado** que el sistema sugiere reponer 30 unidades de un producto con MOQ=50
- **Cuando** intento crear la OC
- **Entonces** el sistema ajusta automáticamente a 50 o muestra advertencia

---

## Escenarios Alternativos

### Escenario: Producto sin proveedor asignado

- **Dado** que un producto en zona roja no tiene proveedor asignado
- **Cuando** el sistema genera sugerencias
- **Entonces** muestra la sugerencia marcada como "Sin proveedor" requiriendo configuración

### Escenario: Múltiples proveedores disponibles

- **Dado** que un producto tiene 3 proveedores asignados
- **Cuando** convierto la sugerencia en OC
- **Entonces** el sistema usa el proveedor preferido por defecto, pero permite seleccionar otro

---

## Notas y Aclaraciones

- La cantidad sugerida siempre busca llevar el flujo neto al TOG (Top of Green)
- Las sugerencias son dinámicas y se actualizan en tiempo real
- El usuario puede ignorar sugerencias sin consecuencias (no son obligatorias)
- Las sugerencias consideran OC pendientes para no duplicar pedidos

---

## Checklist de Validación

- [x] La historia sigue el formato "Como... Quiero... Para..."
- [x] El valor/beneficio está claramente expresado
- [x] Hay al menos 1 criterio de aceptación
- [x] Los criterios siguen el formato Given/When/Then
- [x] Los RF relacionados están correctamente referenciados
- [x] La prioridad MoSCoW está asignada

---

## Señal de Completación

> Historia de usuario HU-011 completada.
